# Markdown 编辑器 v2.0

一个功能强大的 C# WinForm Markdown 文件阅读器和编辑器应用程序，具有语法高亮、实时自动保存和高DPI支持。

## 🚀 新增功能 (v2.0)

### 🎨 语法高亮编辑器
- ✅ **实时语法高亮**: 支持所有Markdown语法元素
- ✅ **智能颜色方案**: 标题、粗体、斜体、代码、链接等不同颜色显示
- ✅ **Consolas字体**: 专业的等宽字体，提升代码可读性
- ✅ **自动格式化**: 300ms延迟的智能语法高亮更新

### 🛠️ 格式化工具栏
- ✅ **快速格式化按钮**: 粗体、斜体、标题、代码、链接等
- ✅ **一键插入**: 引用、列表、表格、水平线
- ✅ **高DPI适配**: 工具栏图标和字体自动缩放
- ✅ **键盘支持**: 支持选中文本后一键格式化

### 💾 智能自动保存
- ✅ **30秒自动保存**: 防止文件丢失和损坏
- ✅ **原子性保存**: 使用临时文件确保数据完整性
- ✅ **状态提示**: 实时显示自动保存状态
- ✅ **错误恢复**: 自动备份和恢复机制

### 📱 高分辨率显示支持
- ✅ **DPI感知**: 自动检测和适配高分辨率显示器
- ✅ **PerMonitorV2模式**: 支持多显示器不同DPI设置
- ✅ **字体缩放**: 根据DPI自动调整字体大小
- ✅ **界面元素缩放**: 工具栏、图标、控件自动适配

## 功能特性

### 🗂️ 文件管理
- ✅ 打开、查看、编辑、保存 Markdown 文件
- ✅ 支持 .md 和 .markdown 文件格式
- ✅ 文件另存为功能
- ✅ 快捷键支持（Ctrl+O 打开，Ctrl+S 保存）

### 📝 编辑功能
- ✅ 语法高亮的文本编辑器
- ✅ 实时 Markdown 预览
- ✅ 自动预览更新（500ms 延迟）
- ✅ 支持所有标准 Markdown 语法

### 💾 历史记录
- ✅ 使用 LiteDB 存储已打开文件的历史记录
- ✅ 左侧文件列表显示最近打开的文件
- ✅ 记录文件路径、最后打开时间、修改时间等信息
- ✅ 点击历史文件快速打开

### 🎨 界面设计
- ✅ 响应式布局，自动适应窗口大小
- ✅ 左侧文件列表，右侧编辑预览区域
- ✅ 水平分割面板，可调整编辑器和预览区域大小
- ✅ 状态栏显示当前操作状态
- ✅ 现代化的界面设计

## 技术架构

### 框架和技术
- **UI 框架**: WinForms (.NET 8.0)
- **Markdown 解析**: MarkdownSharp
- **Web 预览**: Microsoft WebView2
- **数据存储**: LiteDB
- **开发语言**: C# 12.0

### 项目结构
```
MarkdownEditor/
├── Models/                 # 数据模型
│   └── FileHistoryRecord.cs
├── Services/              # 业务服务
│   ├── HistoryService.cs  # 历史记录服务
│   └── MarkdownService.cs # Markdown 处理服务
├── MainForm.cs           # 主窗体逻辑
├── MainForm.Designer.cs  # 主窗体设计
├── Program.cs            # 程序入口
└── MarkdownEditor.csproj # 项目配置
```

## 构建和运行

### 环境要求
- .NET 8.0 SDK
- Windows 10 或更高版本
- Microsoft Edge WebView2 Runtime

### 构建命令
```bash
# 还原依赖包
dotnet restore

# 构建项目
dotnet build

# 运行应用程序
dotnet run
```

### Visual Studio
1. 打开 `MarkdownEditor.sln` 解决方案文件
2. 按 F5 运行调试版本
3. 或按 Ctrl+F5 运行发布版本

## 使用说明

1. **打开文件**: 使用菜单 `文件 > 打开` 或快捷键 `Ctrl+O`
2. **编辑内容**: 在左侧文本编辑器中输入 Markdown 内容
3. **实时预览**: 右侧自动显示格式化后的预览效果
4. **保存文件**: 使用菜单 `文件 > 保存` 或快捷键 `Ctrl+S`
5. **历史文件**: 左侧列表显示最近打开的文件，点击快速打开

## 依赖包

| 包名 | 版本 | 用途 |
|------|------|------|
| LiteDB | 5.0.17 | 本地数据库存储 |
| MarkdownSharp | 2.0.5 | Markdown 解析 |
| Microsoft.Web.WebView2 | 1.0.2045.28 | Web 内容渲染 |

## 特色功能

### 🔄 自动保存提醒
- 文件修改时标题栏显示 "*" 标记
- 关闭应用程序前自动提醒保存
- 切换文件前自动提醒保存

### 📊 文件统计
- 状态栏显示当前操作状态
- 历史文件记录包含文件大小和时间信息

### 🎯 用户体验
- 窗口最大化启动
- 分割面板记住用户调整
- 快捷键操作支持

## 许可证

本项目仅用于学习和个人使用目的。

---

**开发时间**: 2025年9月3日  
**开发环境**: Windows 11 + .NET 8.0  
**开发工具**: Qoder IDE